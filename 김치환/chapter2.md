# 목차

- [목차](#목차)
- [컴파일 과정](#컴파일-과정)
- [타입스크립트 컴파일러](#타입스크립트-컴파일러)
- [타입 시스템](#타입-시스템)
  - [타입스크립트와 자바스크립트 타입시스템 차이](#타입스크립트와-자바스크립트-타입시스템-차이)
- [코드 편집기 설정](#코드-편집기-설정)

# 컴파일 과정

- 프로그램은 프로그래머가 작성한 다수의 텍스트 파일로 구성된다.

  1. 텍스트(코드) -> 추상문법트리(AST) 자료구조로 변환
  2. AST 자료구조 -> 바이트코드로 변환
  3. 바이트코드를 런타임이 평가

⇒ 즉 프로그램을 실행한다는 것은 컴파일러가 소스코드를 파싱해 AST로 만들고, 다시 AST를 바이트코드로 변환한 것을 런타임이 평가하도록 지시한다는 의미

# 타입스크립트 컴파일러

- 타입스크립트는 컴파일러가 AST를 `바이트코드 대신 자바스크립트 코드로 변환`한다
- 타입스크립트 컴파일 과정

  1. 타입스크립트 코드 → 타입스크립트 AST
  2. 타입검사기가 AST를 확인
  3. 타입스크립트 AST → 자바스크립트 코드로 변환
     ***
  4. 자바스크립트 코드 → 자바스크립트 AST
  5. 자바스크립트 AST → 바이트코드
  6. 런타임이 바이트코드를 평가

- 타입스크립트는 2번 과정에서 타입검사기에 의해 타입을 검사하며, 타입정보는 자바스크립트 코드에 영향을 주지 않는다.

# 타입 시스템

- `타입시스템이란 타입 검사기가 프로그램에 타입을 할당하는 데 사용하는 규칙 집합` ⇒ 쉽게말해 변수나 함수가 어떤 타입을 가져야 하는지 정한 규칙 이렇게 이해하면 되지 않을까
- 타입시스템은 보통 두가지 종류가 있다.
  1. `어떤 타입을 사용하는지를 컴파일러에게 명시적으로 알려주는 타입시스템`
     - 어노테이션을 이용하여 명시적으로 지정
     - let a : number 와 같이 `value: type` 형태로 사용
  2. `자동으로 타입을 추론하는 타입 시스템`
- 타입스크립트가 추론하도록 두는 것이 코드를 줄일 수 있는 방법이므로 보통 어노테이션을 생략
- 명시적으로 사용하는 경우는 언제일까? (출처 : 챗 지피티)

  1. **함수의 매개변수 또는 반환 타입이 명확하지 않은 경우**
  2. **다양한 타입의 요소를 포함하는 배열 또는 객체를 초기화할 때**
  3. **복잡한 함수나 메서드를 사용할 때**
  4. **타입추론이 어렵거나 타입스크립트의 추론이 예상과 다를 때**

## 타입스크립트와 자바스크립트 타입시스템 차이

| 타입시스템 기능 | 자바스크립트 | 타입스크립트        |
| --------------- | ------------ | ------------------- |
| 타입 결정 방식  | 동적         | 정적                |
| 타입 자동 변환  | O            | X                   |
| 타입 확인 시점  | 런타임       | 컴파일 타임         |
| 에러 검출 시점  | 런타임       | 컴파일 타임(대부분) |

```
// js
function add(a, b) {
  console.log(a + b);
}

add(1, 3); // 4
add('1', '3'); // '13'
add(1, [3]); // '13'

----------

//ts
function add(a:number, b:number) {
  console.log(a + b);
}

add(1, 3); // 4
add('1', '3'); // 에러발생
add(1, [3]); // 에러발생
```

- 타입스크립트의 경우 프로그램 전체가 아닌 `프로그래머가 명시한 특정 일부분만 정적 타입 검사를 시행하고 나머지 부분은 그대로 자바스크립트와 같이 동적 타입 검사를 시행한다.` 따라서 점진적타입언어 라고 한다. => 정적 + 동적

# 코드 편집기 설정

- tsconfig.json

  - 모든 타입스크립트 프로젝트는 루트 디렉터리에 tsconfig.json 파일을 작성하는것이 일반적이다.
  - tsconfig.json 파일은 `타입스크립트의 프로젝트에서 어떤 파일을 컴파일하고, 어떤 자바스크립트 버전으로 방출하는 등 정의하는 파일`
  - `tsc --init 명령어`를 입력하면 tsconfig.json 파일이 생성되고, 많은 설정들을 확인할 수 있다.
  - 아래의 코드 출처 : [코딩애플](https://codingapple.com/unit/typescript-tsconfig-json/)

  ```
  {
    "compilerOptions": {

    "target": "es5", // 'es3', 'es5', 'es2015', 'es2016', 'es2017','es2018', 'esnext' 가능
    "module": "commonjs", //무슨 import 문법 쓸건지 'commonjs', 'amd', 'es2015', 'esnext'
    "allowJs": true, // js 파일들 ts에서 import해서 쓸 수 있는지
    "checkJs": true, // 일반 js 파일에서도 에러체크 여부
    "jsx": "preserve", // tsx 파일을 jsx로 어떻게 컴파일할 것인지 'preserve', 'react-native', 'react'
    "declaration": true, //컴파일시 .d.ts 파일도 자동으로 함께생성 (현재쓰는 모든 타입이 정의된 파일)
    "outFile": "./", //모든 ts파일을 js파일 하나로 컴파일해줌 (module이 none, amd, system일 때만 가능)
    "outDir": "./", //js파일 아웃풋 경로바꾸기
    "rootDir": "./", //루트경로 바꾸기 (js 파일 아웃풋 경로에 영향줌)
    "removeComments": true, //컴파일시 주석제거

    "strict": true, //strict 관련, noimplicit 어쩌구 관련 모드 전부 켜기
    "noImplicitAny": true, //any타입 금지 여부
    "strictNullChecks": true, //null, undefined 타입에 이상한 짓 할시 에러내기
    "strictFunctionTypes": true, //함수파라미터 타입체크 강하게
    "strictPropertyInitialization": true, //class constructor 작성시 타입체크 강하게
    "noImplicitThis": true, //this 키워드가 any 타입일 경우 에러내기
    "alwaysStrict": true, //자바스크립트 "use strict" 모드 켜기

    "noUnusedLocals": true, //쓰지않는 지역변수 있으면 에러내기
    "noUnusedParameters": true, //쓰지않는 파라미터 있으면 에러내기
    "noImplicitReturns": true, //함수에서 return 빼먹으면 에러내기
    "noFallthroughCasesInSwitch": true, //switch문 이상하면 에러내기
    }
  }
  ```

- tslint.json
  - TSLint 설정을 정의하는 파일
  - 팀 프로젝트에서 일관된 코딩 스타일을 사용할 수 있도록 설정할 수 있다.
